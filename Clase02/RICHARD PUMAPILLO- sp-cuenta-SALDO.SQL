CREATE OR REPLACE PROCEDURE CONSULTA_SALDO(P_NUM_CUENTA CUENTA.CHR_CUENCODIGO%TYPE)

IS
    CONT NUMBER;
    V_COL1 CUENTA.CHR_CUENCODIGO%TYPE;
    V_COL2 MONEDA.VCH_MONEDESCRIPCION%TYPE;
    V_COL3 CLIENTE.VCH_CLIENOMBRE%TYPE;
    V_COL4 CUENTA.DEC_CUENSALDO%TYPE;
    V_COL5 CUENTA.INT_CUENCONTMOV%TYPE;
    V_COL6 SUCURSAL.VCH_SUCUNOMBRE%TYPE;
BEGIN

    SELECT COUNT(*) INTO CONT FROM CUENTA WHERE CHR_CUENCODIGO=P_NUM_CUENTA;
	
    IF(CONT=0)THEN
        RAISE NO_DATA_FOUND;
    END IF;
	
    SELECT CU.CHR_CUENCODIGO, MO.VCH_MONEDESCRIPCION,CL.VCH_CLIENOMBRE,CU.DEC_CUENSALDO,CU.INT_CUENCONTMOV,SU.VCH_SUCUNOMBRE  
    INTO V_COL1,V_COL2,V_COL3,V_COL4,V_COL5,V_COL6
    FROM CUENTA CU 
    INNER JOIN CLIENTE CL ON
    CU.CHR_CLIECODIGO=CL.CHR_CLIECODIGO
    INNER JOIN MONEDA MO ON
    CU.CHR_MONECODIGO = MO.CHR_MONECODIGO
    INNER JOIN SUCURSAL SU ON
    CU.CHR_SUCUCODIGO= SU.CHR_SUCUCODIGO
    WHERE CU.CHR_CUENCODIGO=P_NUM_CUENTA;
    
EXCEPTION  
   
    WHEN NO_DATA_FOUND THEN 
    DBMS_OUTPUT.PUT_LINE('EL NUMERO DE CUENTA  NO EXISTE');
	
END;


CALL CONSULTA_SALDO('00100001');


