
CREATE OR REPLACE PROCEDURE UPDATESALEMP3
(CODIGO EMP.EMPNO%TYPE, SALARIO EMP.SAL%TYPE)
IS
    CONT NUMBER;
	ExcPer Exception;
	Mensaje VARCHAR2(1000);
BEGIN
    SELECT COUNT(*) INTO CONT
        FROM EMP WHERE EMPNO = CODIGO;
    IF (CONT = 0) THEN 
        RAISE ExcPer;
    END IF;
    UPDATE EMP
        SET SAL = SALARIO
        WHERE EMPNO = CODIGO;
    COMMIT;
    DBMS_OUTPUT.PUT_LINE(' PROCESO OK ');
EXCEPTION
	WHEN ExcPer THEN
		Mensaje := 'ERROR, NO EXISTE EL CODIGO.';
		DBMS_OUTPUT.PUT_LINE(Mensaje);
		RAISE_APPLICATION_ERROR(-20001, Mensaje);
	WHEN OTHERS THEN
		Mensaje := 'ERROR: ' || sqlerrm;
		ROLLBACK;
		DBMS_OUTPUT.PUT_LINE(Mensaje);
		RAISE_APPLICATION_ERROR(-20002, Mensaje);
END;


EXEC UPDATESALEMP3 (9999,5000);
